<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Application Meta Tags -->
    <title>{% block title %}DataLab - Sistema de Gestión para Laboratorio de la ONIE{% endblock %}</title>
    <meta name="description" content="{% block description %}Sistema de gestión y elaboración de informes para el laboratorio de química de alimentos de la ONIE{% endblock %}">
    <meta name="author" content="ONIE - Oficina Nacional de Inspección Estatal">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    
    <!-- CSS Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    {% block extra_css %}{% endblock %}
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#1f2937">
    
    <!-- Additional Head Content -->
    {% block head %}{% endblock %}
</head>
<body class="h-full bg-gray-50 {% block body_class %}{% endblock %}">
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <div class="loading-text">Cargando...</div>
    </div>
    
    <!-- Main Application Container -->
    <div class="min-h-full">
        <!-- Sidebar -->
        {% block sidebar %}
        {% include 'componentes/ui/sidebar.html' %}
        {% endblock %}
        
        <!-- Mobile Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>
        
        <!-- Main Content Area -->
        <div class="main-wrapper">
            <!-- Top Header -->
            {% block header %}
            <header class="top-header">
                <div class="header-left">
                    <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Abrir menú">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    
                   
                </div>
                
                <div class="header-right">
                    {% block header_actions %}
                    <!-- Search -->
                    <div class="search-container">
                        <button class="search-icon-button" aria-label="Abrir búsqueda" onclick="DataLab.showSearchModal()">
                            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                        </button>
                        <button class="search-trigger" aria-label="Abrir búsqueda" onclick="DataLab.showSearchModal()">
                            <span class="search-placeholder">Buscar pedidos, clientes, órdenes...</span>
                        </button>
                    </div>
                    {% endblock %}                    
                </div>
            </header>
            {% endblock %}
            
            <!-- Main Content -->
            <main id="main-content" class="main-content" role="main">
                <!-- Flash Messages -->
                {% block flash_messages %}
                {{ flash_message_component() }}
                {% endblock %}
                
                <!-- Page Content -->
                {% block content %}
                <div class="content-container">
                    <div class="content-header">
                        <h1 class="content-title">Bienvenido a DataLab</h1>
                        <p class="content-subtitle">Sistema de gestión y elaboración de informes para el laboratorio de química de alimentos de la ONIE</p>
                    </div>
                </div>
                {% endblock %}
            </main>
        </div>
    </div>
    
    <!-- Modal Container -->
    <div id="modal-container" class="modal-container">
        <!-- Incluir el modal de búsqueda -->
        {% include 'componentes/modals/search_modal.html' %}
    </div>
    
    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/sidebar.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/app.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/search-modal.js') }}" defer></script>
    {% block extra_js %}{% endblock %}
    
    <!-- Additional Scripts -->
    {% block scripts %}{% endblock %}
</body>
</html>